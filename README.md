# TPhpPrown - библиотека PHP-прикладных функций
Библиотека TPhpPrown возникла из практической работы - из вопросов и необходимостей, которые появлялись при программировании сайтов на PHP; из различий между 5 и 7 версиями, которые необходимо было обыгрывать. 
Каждая функция библиотеки выполняет свою прикладную задачу: проверяет какое-либо условие в свершившемся событии или какую-нибудь возможность для предстоящего действия и выполняет само это действие, проверяет определенные характеристики или устанавливает некоторые значения.
В состав библиотеки кроме функций, выполняющих определенные задачи входят и вспомогательные модули - инициализации, которые содержат в себе, как на складе, общие для всех функций константы, переменные, сообщения и другие сущности.

> М. В. Крутихина:  «Под прикладной задачей следует понимать сюжетную задачу, сформулированную в виде задачи-проблемы и удовлетворяющую следующим условиям: 
> Вопрос должен быть поставлен в таком виде, в каком он обычно ставится на практике (решение имеет практическую значимость);
> Все величины (если они заданы) должны быть реальными, взятыми из жизни»

Функции разбиты на группы в зависимости от своего назначения, каждая группа выделяется префиксом в своем имени (префикс может и отсутствовать "по жизни" - в той ситуации, когда функция возникала, префикс не был очевиден).

### 1. Общие (необязательные) префиксы и назначения функций:

**is** - функция проверяет некоторое условие и возвращает true или false (например: 
isSubstrInUri - проверяет присутствие фрагмента в поступившем запросе сайта; 
isCalcInBrowser - проверяет возможность выполнения функции Calc в CSS текущего браузера);
     
**get** - функция возвращает характеристику некоторого объекта или получает значение в результате заданного действия (например:
getSiteDevice - определяет тип устройства, с которого запрошен сайт; 
getTranslit - выполняет прикладную транслитерацию (tve) русских букв);

**put** - ...

**Make** - функция выполняет заданное действие и возвращает целочисленный признак состояния после этого действия (например:
MakeCookie - устанавливает новое значение COOKIE в браузере и заменяет значение во внутреннем массиве $_COOKIE; 
MakeRegExp - отрабатывает регулярное выражение на тексте и трассирует разбор);

**View** - функция представляет на экране сайта значения некоторого объекта (например: 
ViewArray - показывает содержимое простого массива; 
ViewGlobal - показывает значения глобальных переменных);

**Ctrl** - функция проверяет ...

### 2. Алфавитный список функций библиотеки и вспомогательных модулей/инициализаций:
###### blok-obshchih-funkcij
#### [CommonPrown](#commonprown) - блок общих функций. 
###### vybrat-iz-stroki-podstroku-po-regulyarnomu-vyrazheniyu
#### [Findes](#findes) - выбрать из строки подстроку, соответствующую регулярному выражению. 
###### opredelit-obshchie-konstanty-i-peremennye
#### [iniConstMem](#iniconstmem) - определить общие константы и переменные библиотеки. 
###### opredelit-obshchie-soobshcheniya-biblioteki
#### [iniErrMessage](#inierrmessage) - определить общие сообщения библиотеки. 
###### opredelit-populyarnye-regulyarnye-vyrazheniya-php
#### [iniRegExp](#iniregexp) - определить популярные регулярные выражения PHP. 
###### po-useragent-opredelit-rabotaet-li-funkciya-calc-dlya-css
#### [isCalcInBrowser](#iscalcinbrowser) - проанализировать UserAgent браузера по версиям родительских браузеров и определить работает ли функция Calc для CSS 
###### makecookie-name-value-type-init-duration
#### [MakeCookie](#makecookie) - установить новое значение COOKIE в браузере, заменить это значение во внутреннем массиве $_COOKIE и установить новое значение переменной-кукиса в сценарии
###### makeregexp-pattern-text-matches-istrass
#### [MakeRegExp](#makeregexp) - отработать регулярное выражение на тексте и оттрассировать разбор. Рекомендуется использовать только для трассировки. Для выборки подстроки по регулярному выражению следует пользоваться другими функциями (например, Findes)
###### makesession-name-value-type-init
#### [MakeSession](#makesession) - установить новое значение сессионной переменной и вернуть его для изменения глобальной переменной сайтовой страницы
###### preobrazovat-znachenie-k-zadannomu-tipu
#### [MakeType](#maketype) - преобразовать значение к заданному типу
###### soobshchenie-razrabotchika-ob-oshibke
#### [MakeUserError](#makeusererror) - вывести сообщение разработчика об ошибке в программируемом модуле или сформировать пользовательское исключение

### 3. Рекомендации по именованию переменных при программировании сайтов с использованием библиотеки TPhpPrown.

Среди всех переменных, которые появляются при программировании сайтов, можно выделить четыре особенные группы: 

а) **переменные-кукисы**. Это копии кукисов сайта в текущем браузере (то есть копии элементов суперглобального массива $_COOKIE). Базовой функцией для установки кукиса в PHP является функция **setcookie()**. Но в этом случае новое значение кукиса на странице сайта  появится только после её обновления. TPhpPrown предлагает использовать собственную функцию **MakeCookie()**.  Использование переменных-кукисов совместно с этой функцией позволяет работать с измененными значениями уже в текущем сценарии страницы;

б) **параметры страниц сайта**. Это переменные, которые являются характеристиками страниц и могут быть настроены пользователем сайта. В настоящее время это часть переменных-кукисов. В дальнейшем для параметров страниц сайта будут использоваться и данные в памяти браузера LocalStorage;

в) **сессионные переменные**. Это переменные, которые живут в течение одной сессии работы в браузере. Они являются копиями  элементов суперглобального массива $_SESSION. TPhpPrown предлагает, как стиль программирования, использовать сессионные переменные и переменные-кукисы. Это позволит отвлечься от соответствующих суперглобальных массивов и унифицировать работу с переменными.

TPhpPrown рекомендует применять следующие префиксы при  определении имен указанных групп переменных:

**$c_** - для переменных-кукисов (например: 
$c_BrowEntry - число запросов сайта из браузера; $c_PersName - логин посетителя;  $c_PersEntry - счетчик посещений текущим посетителем);
     
**$p_** - для параметров страниц сайта (например:
$p_NewsForm - форма представления новостей; $p_NewsAmt - количество новостей в форме;  $p_HeightIns - количество строк в окне инструкции);

**$s_** - сессионных переменных (например:
$s_Counter - число обращений к странице за сессию; $s_NameNews - активированная лента новостей);

### 4. Описания функций  и вспомогательных модулей/инициализаций: 

***
#### CommonPrown
####  Блок общих функций. 
Программный модуль CommonPrown содержит в себе небольшие функции, которые могут быть использованы при написании сайта на PHP или в backend-разработке проекта.

Функции Alert и ConsoleLog выводят сообщения на странице в браузере. Alert выводит сообщение на экран и приостанавливает работу сайта. ConsoleLog может быть использована при динамической отладке сервера сайта. Она выводит сообщение в консоли браузера, не останавливая вывод на странице.

Функция getAbove по абсолютному пути каталога выделяет вышестоящий каталог. Как правило, используется для технического подъема по каталогам хостинга сайта, построенного на Windows IIS, Apache, Linux.

Две функции getComRequest,isComRequest позволяют выбирать или проверять значения параметров в GET или POST запросах, направляемых к сайту. По умолчанию предполагаются для проверки или выборки, так называемые команды в запросе к сайту, то есть параметры с именем "Com". Например, в запросе для сайта kwinflat.ru "показать справочник услуг", который выглядит следующим  образом: https://kwinflat.ru/Main.php?Com=Uslugi, параметр "Com" имеет  значение "Uslugi".

Функция getPhpVersion формирует пятиразрядное число, указывающее на текущую версию интерпретатора PHP. Используется для управления кодом проекта на PHP в зависимости от версии.

Функции NoSpace и NoZero заменяют вывод околонулевых значений, то есть маленьких чисел в диапазоне [-0.0001, 0.0001] на пробел. Функция NoSpace дополнительно выводит указанное сообщение, если число вне диапазона околонулевых значений.
##### v1.4, 05.03.2018-20.03.2020
###### [в список](#blok-obshchih-funkcij)
***
#### Findes
#### Выбрать из строки подстроку, соответствующую регулярному выражению. 
##### Функция выполняет конкретную и часто возникающую задачу - выбрать из строки подстроку по заданному регулярному выражению и узнать её начальную позицию в этой строке. 
##### Findes возвращает первое или единственное вхождение подстроки в исходной строке, а в случае неудачи возвращает пустую строку.
##### Через третий параметр функция по ссылке возвращает позицию найденного фрагмента, начиная с нулевого значения, или -1, если фрагмент не найден.
##### v1.1, 02.04.2019-23.05.2019
**Синтаксис**

    $Result=Findes($preg,$string,&$point)

**Параметры**

    $preg   - текст регулярного выражения;
    $string - текст, который должен быть обработан регулярным выражением;
    $point  - позиция начала найденного фрагмента после работы регулярного 
    выражения (параметр по ссылке). $point=-1, если фрагмент не найден.
**Возвращаемое значение** 

    $Result  - найденный фрагментов после работы регулярного выражения или
    пустая строка, если фрагмент не найден.
###### [в список](#vybrat-iz-stroki-podstroku-po-regulyarnomu-vyrazheniyu)
***
#### iniConstMem
#### Определить общие константы и переменные библиотеки. 
##### Модуль определяет общие константы (а также переменные), которые используются в различных функциях библиотеки и в вызывающих их внешних программах, и сценариях. 
##### Первая группа констант используются для указания режимов вывода сообщений библиотеки. TPhpPrown позволяет выводить сообщения четырьмя способами: 
##### в текущей позиции сайта, 
##### через исключение с пользовательской ошибкой, 
##### в дополнительном блоке для сообщения (в дополнительном div-е), 
##### в диалоговом окне с помощью jQueryUi.
##### Вторая группа констант определяет семь типов переменных, используемых в библиотеке. 
##### v1.1, 26.01.2019-20.05.2019
**Режимы вывода сообщений об ошибках**

    rvsCurrentPos:  -1 - в текущей позиции сайта;
    rvsTriggerError: 0 - исключение с пользовательской ошибкой;  
    rvsMakeDiv:      1 - в дополнительном div-е для сообщения;   
    rvsDialogWindow: 2 - в диалоговом окне с помощью JQueryUI.

**Типы переменных**

    tArr: array    - массивы (упорядоченные соответствия значений и ключей);
    tObj: object   - объекты, представители определённого класса;    
    Int: integer   - целые числа (из множества {...,-2,-1,0,1,2,...});
    tFloat: double - числа с плавающей точкой;    
    tStr: string   - наборы символов=байт (256 различных значений);   
    tBool: boolean - простейшийе типы, выражающие истинность значения;  
    tNull: null    - переменные без значения.  
###### [в список](#opredelit-obshchie-konstanty-i-peremennye)
***
#### iniErrMessage
#### Определить общие сообщения библиотеки. 
##### Модуль собирает в одном файле константы, соответствующие пользовательским ошибочным сообщениям и предупреждениям со всех функций библиотеки.
##### v1.1, 26.01.2019-20.05.2019
###### [в список](#opredelit-obshchie-soobshcheniya-biblioteki)
***
#### iniRegExp
#### Определить популярные регулярные выражения PHP. 
##### Модуль собирает в одном файле часто используемые регулярные выражения в библиотеке TPhpPrown и других PHP-сценариях. 
##### Большинство регулярных выражений не используют модификаторы, так как они  ориентированы на латинские символы и цифры. 
##### В тех случаях, когда используется кириллица в тексте поиска и в регулярном выражении (например, при поиске фамилии-инициалов), то употребляется модификатор "/u".
#####  При отлавливании и проверке адреса электронной почты в регулярном выражении используется модификатор "/i", заставляющий проверять и большие (верхнего регистра - прописные) буквы, и малые (нижнего регистра - строчные).
##### v1.1, 21.05.2019-02.04.2018
###### [в список](#opredelit-populyarnye-regulyarnye-vyrazheniya-php)
***
#### isCalcInBrowser
#### Проанализировать UserAgent браузера по версиям родительских браузеров и определить работает ли функция Calc для CSS
##### Функция isCalcInBrowser указывает о возможности работы функция Calc в CSS, просматривая содержимое строки UserAgent, перебирая имена всех родительских браузеров и проверяя их версии. 

> Родительскими браузерами в функции isCalcInBrowser называются наименования браузеров, которые упоминает разработчик в строке UserAgent текущего браузера, то есть того, который показывает в текущий момент страницу сайта.

##### После приоритетного анализа версий браузеров принимается решение о наличии функции Calc в CSS  по следующему правилу:
##### а) вначале проверяем по браузеру Chrome. Если он указан и версия больше 55, то Calc работает, иначе смотрим дальше;
##### б) проверяем по браузеру Safari. Если он указан и версия больше 537.35, то Calc работает, иначе смотрим дальше;
##### в) проверяем по браузеру Firefox. Если он есть и версия больше 30, то Calc работает;
##### г) в остальных случаях считаем, что Calc не работает. 
##### В случае противоречивой информации, например для UserAgent: ***Mozilla/5.0 (Windows NT 6.1; Win64; x86) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36*** определится, что функция Calc работает по Safari/537.36  (хотя по Chrome/55.0.2883.87 этого не следует). 

##### v1.0, 13.02.2019 (ревизия будет выполнена в 02.2020)

***Синтаксис*** 

    $Result=isCalcInBrowser($UserAgent,$ModeError=rvsCurrentPos);

***Параметры***

    $UserAgent - UserAgent браузера
    $ModeError - режим вывода сообщения об ошибке (по умолчанию в текущей позиции сайта)

***Возвращаемое значение*** 

    $Result=true, если версии UserAgent показывают о возможности 
    работы функция Calc в CSS

***Зарегистрированные ошибки/исключения***

    1 - "В UserAgent присутствует несколько браузеров";
    2 - "Неверная или отсутствует версия браузера".

***Комментарий***
    Фрагменты содержимого UserAgent некоторых браузеров на 13.02.2019 и возможность 
    работы функция Calc в CSS:
    
    Mozilla/5.0(Windows NT 10.0;Win64;x64) AppleWebKit/537.36 (KHTML,like Gecko)
    
    Chrome/56.0.2924.92  Safari/537.36 	                             Орбитум  +
    Сhrome/61.0.3163.69  Safari/537.36 Freeu/61.0.3163.69              Freeu  +
    Chrome/61.0.3163.79  Safari/537.36 Maxthon/5.2.6.1000	         Maxthon  +
    Chrome/61.0.3163.125 Safari/537.36 Amigo/61.0.3163.125	           Amigo  +
    Chrome/64.0.3282.140 Safari/537.36 Edge/17.17134                    Edge  +
    Chrome/70.0.3538.102 Safari/537.36 OPR/57.0.3098.116               Opera  +
    Chrome/71.0.3578.98  Safari/537.36                                Chrome  +
    Chrome/71.0.3578.99  Safari/537.36 YaBrowser/19.1.0.2644          Yandex  +
    
    Safari/534.57.2	                                                  Safari  -
    Safari/537.21        QupZilla/1.8.6	                            QupZilla  -
        		
    Firefox/31.0         K-Meleon/75.1	                            K-Meleon  +
    Firefox/65.0	                                                 Firefox  +
        
    Trident/7.0                                                        Avant  -


###### [в список](#po-useragent-opredelit-rabotaet-li-funkciya-calc-dlya-css)
***
#### MakeCookie
#### Установить новое значение COOKIE в браузере, заменить это значение во внутреннем массиве $_COOKIE и установить новое значение переменной-кукиса в сценарии
####  v1.5, 25.03.2020

Функция установливает новое значение кукиса в браузере и синхронизирует это значение еще с двумя объектами:
а) обновляет значение данного кукиса в глобальном массиве $_COOKIE. Это действие позволяет использовать значение уже в текущем PHP-сценарии без перезагрузки страницы;
б) возращает указанное значение по завершении работы для передачи его соответствующей переменной-кукису. 

Возникновение ошибок при выполнении функции или отсутствие поддержки кукисов в браузере не влияет на установление значения переменой-кукиса на сервере и соответствующего значения в массиве $_COOKIE. Эти значения могут быть подтверждены при следующей загрузке страницы.

***Синтаксис***

    $Result=MakeCookie($Name,$Value=null,$Type=tStr,$Init=false,$Duration=cook512,$Options=["path"=>"/","domain"=>"","secure"=>false,"httponly"=>false,"samesite"=>null],$ModeError=rvsTriggerError)

***Параметры***

    $Name - имя кукиса в браузере клиента (по имени кукиса можно формировать глобальную переменную сайтовой страницы добавлением префикса "с_". Например: "BrowEntry" --> "$с_BrowEntry");
    
    $Value - значение кукиса браузера, это же значение во внутреннем массиве $_COOKIE и у соответствующей глобальной переменной сайтовой страницы. Если $Value=null или неопределено, то функция возвращает установленное значение кукиса;
    
    $Type - константа, определяющая тип значения: tInt - integer, целое число (из множества {...,-2,-1,0,1,2,...}); tFloat - double, число с плавающей точкой; tStr - string, набор символов=байт (256 различных значений); tBool - boolean, простейший тип, выражающие истинность значения. По умолчанию - tStr;
    
    $Init = true, это означает, что требуется установить указанное значение кукиса, только в том случае, если кукиса еще не было. В обычных условиях (по умолчанию, когда $Init=false) значение кукиса меняется всегда;
    
    $Duration - время жизни кукиса (по умолчанию 44236800 = 512 дней = 512д*24ч*60м*60с):
    
    cook512=44236800,  время жизни кукиса составляет 512 дней;
    cookSession=0,     время жизни кукиса - до завершения сеанса браузера;
    cookDelete=-1,     кукис удалить по завершении сеанса браузера
    
    $Options - дополнительные параметры (RFC6265bis), по умолчанию $Options = "path"=>"/","domain"=>"","secure"=>false,"httponly"=>false,"samesite"=>null], где 
    
    "path" - путь к каталогу на сервере, из которого будет доступен кукис; 
    "domain" - домен, на котором возникает кукис; "secure" - указывает на то, что кукис должен передаваться от клиента по защищенному соединению; 
    "httponly" - кукис будет доступен только через HTTP-протокол; 
    "samesite" - режим связывания кукиса со сторонними сайтами (должен быть либо None, либо Lax, либо Strict)
    
    $ModeError - режим вывода сообщений об ошибке (по умолчанию через исключение с пользовательской ошибкой на сайте doortry.ru):
    
    rvsCurrentPos=-1,   в текущей позиции сайта; 
    rvsTriggerError=0,  исключение с пользовательской ошибкой на подключенном сайте;  
    rvsMakeDiv=1,       в дополнительном div-е для сообщения;   
    rvsDialogWindow=2,  в диалоговом окне с помощью JQueryUI   


***Возвращаемое значение*** 

    $Result - установленное значение COOKIE в браузере, во внутреннем массиве
    $_COOKIE и переменной-кукиса в сценарии сайтовой страницы

***Замечания***

    1. При изменении кукиса встроенной функцией PHP setcookie меняется только значение кукиса в браузере, а его величина в массиве $_COOKIE в текущем PHP-сценарии остается без изменения. Поэтому для синхронизации значений (на сервере) следует использовать MakeCookie.
    2. На 05.03.2020 в версии PHP 7.3.8 не удалось проверить действие параметра "samesite". Не обнаруживаются константы None, Lax, Strict.


###### [в список](#makecookie-name-value-type-init-duration)
***
#### MakeRegExp
#### Отработать регулярное выражение на тексте и оттрассировать разбор. Рекомендуется использовать только для трассировки. Для выборки подстроки по регулярному выражению следует пользоваться другими функциями (например, Findes)
#### v1.1, 21.05.2019

MakeRegExp предназначена для проверки и отладки регулярных выражений. Она надстроена над функцией PHP: preg_match_all. Функция запускает указанное регулярное выражение по требуемому тексту и показывает все найденные фрагменты текста в соответствии с регулярным выражением. 
MakeRegExp может использоваться для настройки функции Findes перед встраиваем её в код сценария PHP.

***Синтаксис***

    $Result=MakeRegExp($pattern,$text,&$matches=null,$isTrass=mriIsDeprecated);

***Параметры***

    $pattern - текст регулярного выражения;
    $text    - текст, который должен быть обработан регулярным выражением;
    $matches - массив найденных фрагментов и позиций их начала после работы
    регулярного выражения (параметр по ссылке);
    $isTrass - режим трассировки найденных соответствий регулярному выражению:
    
    mriStandTracing - трассировка результатов стандартным выводом;
    mriInstallTrace - установленная трассировка MakeRegExp;
    mriTracingBlock - трассировка заблокирована;
    mriIsDeprecated - разбор и сообщение устаревшего использования (по умолчанию).

***Возвращаемое значение***

    $Result  - количество найденных соответствий регулярному выражению. 
    $Result=0, если соответствий не найдено.

***Зарегистрированные ошибки/исключения***

    FetchStrObsolete - "Устарела функция выборки подстроки MakeRegExp".
###### [в список](#makeregexp-pattern-text-matches-istrass)

***
#### MakeSession
#### Установить новое значение сессионной переменной и вернуть его для изменения глобальной переменной сайтовой страницы
#### v1.1, 31.05.2018
**Синтаксис**

    $Result=MakeSession($Name,$Value,$Type,$Init=false);

**Параметры**

    $Name  - имя сессионной переменной (как правило, по имени сессионной переменной 
    формируется глобальная переменная сайтовой страницы добавлением префикса "s_".  
    Например: "Counter" --> "$s_Counter");
    $Value - значение сессионной переменной и соответствующей глобальной переменная сайтовой страницы;
    $Type  - константа, определяющая тип значения: array, object, integer,
    double, string, boolean, null.
    $Init  = true, это означает, что требуется установить указанное значение 
    сессионной переменной, только в том случае, если её еще не было. 
    Обычно (по умолчанию, когда $Init=false) значение переменной меняется 
    всегда.

**Возвращаемое значение** 

    $Result  - установленное значение сессионной переменной и
    соответствующей глобальной переменной сайтовой страницы.
###### [в список](#makesession-name-value-type-init)

***
#### MakeType
#### Преобразовать значение к заданному типу
В PHP не требуется строгого определения типа переменной. Каждая переменная может поменять свой тип в зависимости от контекста кода. Это и плохо и хорошо.
Хорошо то, что в большинстве случаев можно не думать о типе переменной,  но существуют ситуации, когда такая универсальность вызывает многозначные толкования и может быть источником ошибок. Это плохо. Например: при формировании упорядоченных списков или массивов, или когда требуется работа с размерностями в числах с плавающей точкой. 
В этих случаях можно воспользоваться процедурой приведения типов https://www.php.net/manual/ru/language.types.type-juggling.php#language.types.typecasting или использовать функцию **MakeType**. Что применять определяется требованиями Вашего стиля программирования.

    Функция MakeType преобразует переданное значение к заданному типу 
    и возвращает его в соответствии с указанной константой типа:
    
    tArr   - array, массив (упорядоченное соответствия значений и ключей);
    tObj   - object, объект (представитель определённого класса);
    tInt   - integer, целое число (из множества {...,-2,-1,0,1,2,...});
    tFloat - double, число с плавающей точкой
    tStr   - string, набор символов=байт (256 различных значений)
    tBool  - boolean, простейший тип, выражающие истинность значения
    tNull  - null, переменные без значения

##### v1.1, 26.04.2018-24.05.2019

**Синтаксиc**

    $Result=MakeType($Value,$Type);

**Параметры**

    $Value  - значение переменной, которое следует привести к заданному типу;
    $Type   - константа, определяющая тип значения: tArr, tObj, tInt, 
    tFloat, tStr, tBool, tNull.

**Возвращаемое значение** 

    $Result  - переданное значение функции заданного типа или null, если тип значения указан неверно
 ###### [в список](#preobrazovat-znachenie-k-zadannomu-tipu)

***
#### MakeUserError
#### Вывести сообщение разработчика об ошибке в программируемом модуле или сформировать пользовательское исключение
##### Функция MakeUserError выводит сообщение из разрабатываемого программного модуля при возникновении ошибочной ситуации. Информационное сообщение об этом выводится в одном из четырёх режимов:
##### в режиме $Mode = rvsCurrentPos просто выводится сообщение в текущей позиции сайта. Данный режим используется при тестировании модулей;
##### в режиме по умолчанию $Mode = rvsTriggerError вызывается исключение с пользовательской ошибкой через trigger_error(\$Message,$errtype), 
##### где $Message - текст сообщения, 
##### $errtype может быть одним из значений E_USER_ERROR, E_USER_WARNING, E_USER_NOTICE, E_USER_DEPRECATED. По умолчанию E_USER_ERROR;
##### в режиме $Mode = rvsMakeDiv предполагается, что ошибка произошла в php-коде до разворачивания html-страницы и, в этом случае, формируется дополнительный div сообщения с id="Ers";
##### в режиме $Mode = rvsDialogWindow разворачивается сообщение в диалоговом окне с помощью JQueryUI. В этом случае на вызывающем сайте должны быть подключены модули jquery,jquery-ui,jquery-ui.css, например от Microsoft:

    <link rel="stylesheet" type="text/css"
    href="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/themes/ui-lightness/jquery-ui.css">
    <script
       src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.2.min.js">
    </script>
    <script
       src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.11.2/jquery-ui.min.js">
    </script>

##### Функция MakeUserError выделяет два вида ошибок (контроллируемые и неконтроллируемые) и определяет их следующим образом:
##### а) ошибка является контроллируемой в случае, когда известно в каком месте сайта она может возникнуть и, таким образом, сообщение об ошибке можно вывести на экран по разметке сайта;
##### б) в остальных случаях ошибка является неконтроллируемой и вывод сообщения об ошибке выполняется на отдельной странице;
##### в) по умолчанию функция генерирует неконтроллируемую ошибку/исключение через trigger_error($Message,E_USER_ERROR), предполагая на верхнем уровне обработку ошибки через сайт doortry.ru, где неконтроллируемая ошибка возникает на странице исключения с трассировкой его всплывания;
##### v1.4, 17.02.2019-12.01.2020
***Синтаксис*** 
   `MakeUserError($Mess,$Prefix='TPhpPrown',$Mode=0,$errtype=E_USER_ERROR,$div='Ers')`

***Параметры***

    $Mess    - текст сообщения об ошибке/исключении;
    $Prefix  - префикс сообщения, указывающий на программную систему, в модуле которой возникла ошибка/исключение;
    $Mode    - режим вывода сообщений: rvsCurrentPos, rvsTriggerError, rvsMakeDiv, rvsDialogWindow;
    $errtype - тип ошибки/исключения: E_USER_ERROR,E_USER_WARNING,E_USER_NOTICE,E_USER_DEPRECATED;
    $div     - имя div-а для сообщения в режимах rvsMakeDiv,rvsDialogWindow. По умолчанию 'Ers'.

***Возвращаемое значение*** 

    $Result=true, если сообщение сформировано без ошибок

***Зарегистрированные ошибки/исключения***

    define ("WrongTypeError", "Неверно указан тип ошибки");

###### [в список](#soobshchenie-razrabotchika-ob-oshibke)

***

​    































